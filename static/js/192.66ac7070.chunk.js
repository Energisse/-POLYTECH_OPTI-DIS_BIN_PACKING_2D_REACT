(()=>{"use strict";var t={9434:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(4720));class o extends n.default{constructor(t,e,i){super(e,i),this.id=t}rotate(){[this.width,this.height]=[this.height,this.width]}copy(){return new o(this.id,this.width,this.height)}}e.default=o},4076:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(4720));class o extends n.default{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(t,e),this._item=null,this._items=[],this._fitness=0,this.bottomSubBin=null,this.rightSubBin=null,this.divided=!1,this.x=i,this.y=s}addItem(t){const e=(e=>{if(t.width>this.width||t.height>this.height)return!1;if(t.area>this.area-((null===(e=this._item)||void 0===e?void 0:e.area)||0))return!1;if(null==this._item)return this._item=t,!0;if(null==this.rightSubBin&&(this.rightSubBin=new o(this.width-this._item.width,this.height,this.x+this._item.width,this.y)),null==this.bottomSubBin&&(this.bottomSubBin=new o(this._item.width,this.height-this._item.height,this.x,this.y+this._item.height)),this.rightSubBin.addItem(t))return!0;if(this.bottomSubBin.addItem(t))return!0;const i=Math.max(this._item.height,function t(e){var i;let s=e.y+((null===(i=e.item)||void 0===i?void 0:i.height)||0);for(const n of e.subBins)s=Math.max(s,t(n));return s}(this.rightSubBin)),s=new o(this.width,this.height-i,this.x,this.y+i);for(const t of this.bottomSubBin.items)if(!s.addItem(t))return!1;if(s.addItem(t)){const t=new o(this.width-this._item.width,i,this.x+this._item.width,this.y);for(const e of this.rightSubBin.items)if(!t.addItem(e))return!1;return this.bottomSubBin=s,this.rightSubBin=t,!0}return!1})();return e&&(this._items.push(t),this._fitness+=t.area),e}get item(){return this._item}get fitness(){return this._fitness}get items(){return this._items}get subBins(){return[this.rightSubBin,this.bottomSubBin].filter((t=>null!=t))}copy(){var t,e,i;const s=new o(this.width,this.height,this.x,this.y);return s._item=(null===(t=this._item)||void 0===t?void 0:t.copy())||null,s.divided=this.divided,s.bottomSubBin=(null===(e=this.bottomSubBin)||void 0===e?void 0:e.copy())||null,s.rightSubBin=(null===(i=this.rightSubBin)||void 0===i?void 0:i.copy())||null,s}isEmtpy(){return null==this._item&&(!(null!=this.rightSubBin&&!this.rightSubBin.isEmtpy())&&!(null!=this.bottomSubBin&&!this.bottomSubBin.isEmtpy()))}}e.default=o},9129:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(4076));e.default=class{constructor(t,e,i){this.bins=[],this._items=[],this.binWidth=t,this.binHeight=e,this.bins=[new n.default(t,e)],i.forEach((i=>{if(this.bins.at(-1).addItem(i))return;const s=new n.default(t,e);s.addItem(i),this.bins.push(s)})),this._items=i}get items(){return this._items}get fitness(){return this.bins.reduce(((t,e)=>t+Math.pow(e.fitness,2)),0)}}},3917:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(9434)),o=s(i(9129));e.default=class{constructor(t){const[e,i,s,o,r,,,...h]=t.replace(/[^:|\n]*: /g,"").replace(/\r/g,"").split("\n");if(this.name=e,this.comment=i,this.nbItems=+s,this.binWidth=+o,this.binHeight=+r,this.items=h.map((t=>{const[e,i,s]=t.split(" ").map(Number);return new n.default(e,i,s)})),this.items.length!=+s)throw new Error("Number of items does not match")}get minBinAmount(){return Math.ceil(this.items.reduce(((t,e)=>t+e.area),0)/(this.binWidth*this.binHeight))}createBinPacking(){return new o.default(this.binWidth,this.binHeight,this.items)}createRandomSolution(){return new o.default(this.binWidth,this.binHeight,[...this.items].sort((()=>Math.random()-.5)))}}},721:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BinPacking=e.DataSet=e.HillClimbing=e.RecuitSimule=e.Genetique=e.Tabou=e.Metaheuristique=void 0;const n=s(i(610));e.Metaheuristique=n.default;const o=s(i(2022));e.Tabou=o.default;const r=s(i(8646));e.Genetique=r.default;const h=s(i(3208));e.RecuitSimule=h.default;const a=s(i(4489));e.HillClimbing=a.default;const u=s(i(3917));e.DataSet=u.default;const l=s(i(9129));e.BinPacking=l.default},8646:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(9129)),o=s(i(610));class r extends o.default{constructor(t,e){super(t,{convergence:10,iteration:t.items.length**2,populationSize:20,...e}),this.generation=[],this.newGeneration=[]}generatePopulation(){for(;this.generation.length<this.config.populationSize;)this.generation.push(this.dataSet.createRandomSolution())}computeFitness(){const t=this.generation.map((t=>({individual:t,fitness:t.fitness})));t.sort(((t,e)=>e.fitness-t.fitness)),this.generation=t.map((t=>t.individual))}crossover(){this.newGeneration=[this.generation[0]];for(let t=1;t<this.config.populationSize/2;t++){const e=this.generation[t-1],i=this.generation[t],s=e.items,o=i.items,r=Math.floor(Math.random()*s.length),h=Math.floor(Math.random()*s.length),a=Math.min(r,h),u=Math.max(r,h)-a,l=s.slice(a,u).map((t=>t.copy())),d=o.filter((t=>!l.find((e=>{let{id:i}=e;return i===t.id}))));d.splice(a,0,...l),this.newGeneration.push(new n.default(this.dataSet.binWidth,this.dataSet.binHeight,d))}}mutate(){for(let t=1;t<this.newGeneration.length;t++){const e=this.newGeneration[t].items;for(let t=0;t<e.length;t++){if(Math.random()>.1)continue;const i=e.splice(t,1)[0].copy();i.rotate();const s=Math.floor(Math.random()*e.length);e.splice(s,0,i)}this.newGeneration[t]=new n.default(this.dataSet.binWidth,this.dataSet.binHeight,e)}}*initGenerator(){for(let t=1;t<=this.config.iteration;t++)this.generatePopulation(),this.computeFitness(),this.crossover(),this.mutate(),this.generation=this.newGeneration,this.generatePopulation(),yield{solution:this.generation,iteration:t}}getPopulation(){return this.generation}get solution(){return this.generation[0]}}e.default=r},4489:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(9129)),o=s(i(610));class r extends o.default{constructor(t,e){super(t,{convergence:0,...e}),this.bestSolution=this.dataSet.createRandomSolution()}*initGenerator(){let t=this.bestSolution.fitness,e=1;for(;;){const i=this.getBestNeighbors();if(i.fitness<=t)break;this.bestSolution=i.solution,t=i.fitness,yield{solution:[this.bestSolution],iteration:e++}}}getBestNeighbors(){const t=this.bestSolution.items;let e,i=0;for(let s=0;s<t.length;s++)for(let o=0;o<t.length;o++){if(s===o)continue;const r=t.map((t=>t.copy()));r[s].rotate(),r.splice(o,0,r.splice(s,1)[0]);const h=new n.default(this.dataSet.binWidth,this.dataSet.binHeight,r);h.fitness>i&&(e=h,i=h.fitness)}return{solution:e,fitness:i}}get solution(){return this.bestSolution}}e.default=r},610:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t,e){this.lastFitness=0,this.dataSet=t,this._config=e,this.generator=this.convergenceGenerator()}run(){return this.generator.next()}*convergenceGenerator(){const t=this.initGenerator();let e=0;for(const{solution:i,iteration:s}of t)0!==this._config.convergence&&(this.lastFitness>=i[0].fitness?(e++,e>=this._config.convergence&&t.return()):(this.lastFitness=this.fitness,e=0)),yield{solution:i,iteration:s}}[Symbol.iterator](){return this.generator}get config(){return this._config}set config(t){this._config={...this._config,...t}}get numberOfBins(){return this.solution.bins.length}get fitness(){return this.solution.fitness}}e.default=i},3208:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(9129)),o=s(i(610));class r extends o.default{constructor(t,e){super(t,{convergence:10,iteration:t.items.length,iterationByTemperature:t.items.length,temperatureDecrease:.8,temperature:1,...e}),this.bestSolution=this.dataSet.createRandomSolution(),this.bestFitness=this.bestSolution.fitness,this.temperature=this.config.temperature}*initGenerator(){let t=this.bestSolution.fitness,e=this.bestSolution,i=1;for(let s=1;s<=this.config.iteration;s++){for(let s=1;s<=this.config.iterationByTemperature;s++){const s=this.getRandomNeighboor(),n=s.fitness;if(n>=t)e=s,t=n,t>this.bestFitness&&(this.bestSolution=e,this.bestFitness=t);else{Math.random()<Math.exp((n-t)/this.temperature)&&(e=s)}yield{solution:[e],iteration:i++}}this.temperature*=this.config.temperatureDecrease}}getRandomNeighboor(){const t=this.bestSolution.items;for(;;){const e=Math.floor(Math.random()*t.length),i=Math.floor(Math.random()*t.length);if(e===i)continue;const s=t.map((t=>t.copy()));return s[e].rotate(),s.splice(i,0,s.splice(e,1)[0]),new n.default(this.dataSet.binWidth,this.dataSet.binHeight,s)}}get solution(){return this.bestSolution}}e.default=r},2022:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(9129)),o=s(i(610));class r extends o.default{constructor(t,e){super(t,{convergence:10,iteration:t.items.length**2,tabouSize:t.items.length/2,...e}),this.tabou=[],this.bestSolution=this.dataSet.createRandomSolution(),this.tabou=[]}*initGenerator(){let t=this.bestSolution.fitness;for(let e=1;e<=this.config.iteration;e++){const i=this.getBestNeighbors();i.fitness<=t&&(this.tabou.push({src:i.src,dest:i.dest}),this.tabou.length>this.config.tabouSize&&this.tabou.shift()),this.bestSolution=i.solution,t=i.fitness,yield{solution:[this.bestSolution],iteration:e}}}getBestNeighbors(){const t=this.bestSolution.items;let e,i=0,s=0,o=0;for(let r=0;r<t.length;r++)for(let h=0;h<t.length;h++){if(r===h)continue;if(this.tabou.some((t=>t.src===r&&t.dest===h)))continue;const a=t.map((t=>t.copy()));a[r].rotate(),a.splice(h,0,a.splice(r,1)[0]);const u=new n.default(this.dataSet.binWidth,this.dataSet.binHeight,a);u.fitness>o&&(i=r,s=h,e=u,o=u.fitness)}return{dest:s,src:i,solution:e,fitness:o}}get solution(){return this.bestSolution}}e.default=r},4720:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.width=t,this.height=e}get area(){return this.width*this.height}}}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=i(721);self.addEventListener("message",(t=>{let{data:{data:e,type:i}}=t;self.dispatchEvent(new CustomEvent(i,{detail:e}))}));let e=null,s=null,n=null,o=100,r=1,h=0;DedicatedWorkerGlobalScope.prototype.emit=function(){this.postMessage({type:arguments.length<=0?void 0:arguments[0],data:arguments.length<=1?void 0:arguments[1]})};const a={"Recuit simul\xe9":t.RecuitSimule,Tabou:t.Tabou,Genetique:t.Genetique,"Hill Climbing":t.HillClimbing};function u(t,e){const i=[],s=[];let h=!1;for(let n=0;n<r;n++){const n=l(t,e);if(!n){h=!0;break}i.push(n.stats),s.push(n.solution)}s.length&&i.length&&(self.emit("stats",i),self.emit("solution",s)),h?(self.emit("done"),self.close()):n=setTimeout((()=>{u(t,e)}),o)}function l(t,e){const i=self.performance.now(),{value:s,done:n}=e.run(),o=self.performance.now();if(h+=o-i,n)return;const{solution:r,iteration:a}=s,u=r.map(((e,i)=>{const s={bins:[],items:[]};return e.bins.forEach(((e,n)=>{let o=d(e,n*t.binWidth*1.1,i*t.binWidth*1.1,n.toString());s.bins.push(...o.bins),s.items.push(...o.items)})),{bins:s.bins.sort(((t,e)=>parseInt(t.id)-parseInt(e.id))),items:s.items.sort(((t,e)=>t.id-e.id))}}));return{solution:{binPacking:u,width:u.reduce(((t,e)=>{let{bins:i}=e;return Math.max(i.reduce(((t,e)=>Math.max(t,e.x+e.width)),0),t)}),0),height:(u.length-1)*t.binHeight*1.1+t.binHeight},stats:{fitness:r[0].fitness,iteration:a,numberOfBin:r[0].bins.length,time:h}}}function d(t,e,i,s){const n={bins:[],items:[]};return n.bins.push({x:t.x+e,y:t.y+i,width:t.width,height:t.height,id:s}),t.item&&n.items.push({x:t.x+e,y:t.y+i,width:t.item.width,height:t.item.height,id:t.item.id}),t.subBins.forEach(((t,o)=>{let r=d(t,e,i,s+"-"+o);n.bins.push(...r.bins),n.items.push(...r.items)})),n}self.addEventListener("init",(i=>{let{detail:{rawDataSet:n,metaheuristique:h,config:u,speed:l}}=i;e=new t.DataSet(n),s=new a[h](e,u),o=l.interval,r=l.iterationCount,self.emit("config",s.config)})),self.addEventListener("config",(t=>{let{detail:e}=t;if(!s)throw new Error("metaheuristique is not initialized");s.config=e})),self.addEventListener("start",(()=>{if(!e||!s)throw new Error("dataSet or metaheuristique is not initialized");n&&clearTimeout(n);u(e,s)})),self.addEventListener("pause",(()=>{n&&clearTimeout(n)})),self.addEventListener("stop",(()=>{n&&clearTimeout(n),self.emit("done"),self.close()})),self.addEventListener("step",(()=>{if(!e||!s)throw new Error("dataSet or metaheuristique is not initialized");n&&clearTimeout(n);const t=l(e,s);t&&(self.emit("stats",[t.stats]),self.emit("solution",[t.solution]))})),self.addEventListener("convergence",(()=>{if(!e||!s)throw new Error("dataSet or metaheuristique is not initialized");n&&clearTimeout(n);const t=[],i=[];for(;;){const n=l(e,s);if(!n)break;t.push(n.stats),i.push(n.solution)}self.emit("stats",t),self.emit("solution",i),self.emit("done"),self.close()})),self.addEventListener("speed",(t=>{let{detail:e}=t;o=e.interval,r=e.iterationCount}))})()})();
//# sourceMappingURL=192.66ac7070.chunk.js.map